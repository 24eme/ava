{
  "_id": "TEMPLATE-FACTURE-2020",
  "type": "TemplateFacture",
  "campagne": 2020,
  "template": "IGP",
  "libelle": "2020 - IGP Var",
  "docs": [
    "DR",
    "DRev",
    "Degustation",
    "Conditionnement",
    "ChgtDenom"
  ],
  "cotisations": {
    "00_cotisationSyndicaleRecolte": {
      "modele": "CotisationsCollection",
      "callback": "",
      "libelle": "",
      "code_comptable": "70604000",
      "details": {
        "superficie": {
          "modele": "CotisationVariable",
          "prix": 10,
          "tva": 0.2,
          "unite": "ha",
          "libelle": "Cotisation technique et syndicale récolte 2020",
          "complement_libelle": "",
          "docs": [
            "DR"
          ],
          "callback": "calcul",
          "callback_parameters": [
            "L4"
          ]
        }
      }
    },
    "10_fraisGestion": {
      "modele": "CotisationsCollection",
      "callback": "",
      "libelle": "Frais de gestion",
      "code_comptable": "70611400",
      "details": {
        "fraisgestion": {
          "modele": "CotisationFixe",
          "prix": 35,
          "tva": 0.2,
          "libelle": "",
          "complement_libelle": "",
          "docs": [
            "DR"
          ],
          "callback": null,
          "callback_parameters": []
        }
      }
    },
    "10_%detail_identifiant%_20_controleIgp": {
      "minimum": 70,
      "modele": "CotisationsCollection",
      "callback": "",
      "libelle": "Contrôle IGP",
      "code_comptable": "70610400",
      "details": {
        "cotisationIgp": {
          "modele": "Cotisation",
          "prix": 0.7,
          "tva": 0.2,
          "unite": "hl",
          "libelle": "",
          "complement_libelle": "",
          "docs": [
            "Degustation"
          ],
          "callback": "buildMouvementsFacturesVolumeDeguste",
          "callback_parameters": [
            "NOT /appellations/MED AND NOT /deja/CONFORME"
          ]
        }
      }
    },
    "10_%detail_identifiant%_20_controleMed": {
      "minimum": 90,
      "modele": "CotisationsCollection",
      "callback": "",
      "libelle": "Contrôle Méditerranée",
      "code_comptable": "70615000",
      "details": {
        "cotisationMed": {
          "modele": "Cotisation",
          "prix": 0.9,
          "tva": 0.2,
          "unite": "hl",
          "libelle": "",
          "complement_libelle": "",
          "docs": [
            "Degustation"
          ],
          "callback": "buildMouvementsFacturesVolumeDeguste",
          "callback_parameters": [
            "/appellations/MED AND NOT /deja/CONFORME"
          ]
        }
      }
    },
    "10_%detail_identifiant%_30_promotion": {
      "modele": "CotisationsCollection",
      "callback": "",
      "libelle": "Cotisation promotion",
      "code_comptable": "70612400",
      "details": {
        "promotion": {
          "modele": "Cotisation",
          "prix": 0.7,
          "tva": 0.2,
          "unite": "hl",
          "libelle": "",
          "complement_libelle": "",
          "docs": [
            "Degustation"
          ],
          "callback": "buildMouvementsFacturesVolumeDeguste",
          "callback_parameters": [
            "NOT /appellations/MED AND NOT /deja/CONFORME"
          ]
        }
      }
    },
    "10_%detail_identifiant%_40_oi": {
      "modele": "CotisationsCollection",
      "callback": "",
      "libelle": "Cotisation organisme d'inspection",
      "code_comptable": "70612400",
      "details": {
        "oi": {
          "modele": "Cotisation",
          "prix": 0.05,
          "tva": 0.2,
          "unite": "hl",
          "libelle": "",
          "complement_libelle": "",
          "docs": [
            "Degustation"
          ],
          "callback": "buildMouvementsFacturesVolumeDeguste",
          "callback_parameters": [
            "NOT /appellations/MED AND NOT /deja/CONFORME"
          ]
        }
      }
    },
    "99_%detail_identifiant%_99_inao": {
      "modele": "CotisationsCollection",
      "callback": "",
      "libelle": "Droit INAO",
      "code_comptable": "70612400",
      "details": {
        "inao": {
          "modele": "Cotisation",
          "prix": 0.03,
          "tva": 0,
          "unite": "hl",
          "libelle": "",
          "complement_libelle": "",
          "docs": [
            "Degustation"
          ],
          "callback": "buildMouvementsFacturesVolumeDeguste",
          "callback_parameters": [
              "NOT /deja/CONFORME"
          ]
        }
      }
    },
    "changementdenom": {
      "modele": "CotisationsCollection",
      "callback": "",
      "libelle": "Changement de dénomination",
      "code_comptable": "",
      "details": {
        "frais": {
          "modele": "CotisationFixe",
          "prix": 60,
          "tva": 0.2,
          "libelle": "Frais IGP Méditerranée",
          "complement_libelle": "",
          "docs": [
            "ChgtDenom"
          ],
          "callback": "calculFraisJournalier",
          "callback_parameters": [
            "/appellations/MED AND NOT NEGOCIANT"
          ]
        },
        "forfaitNegociant": {
          "modele": "CotisationFixe",
          "prix": 200,
          "tva": 0.2,
          "libelle": "Forfait negociant",
          "complement_libelle": "",
          "docs": [
            "ChgtDenom"
          ],
          "callback": "isDeclarantFamille",
          "callback_parameters": [
            "NEGOCIANT"
          ]
        },
        "chgtdenommed": {
          "modele": "CotisationVariable",
          "prix": 0.2,
          "tva": 0.2,
          "unite": "hl",
          "libelle": "Méditerranée",
          "complement_libelle": "",
          "docs": [
            "ChgtDenom"
          ],
          "callback": "getVolumeFacturable",
          "callback_parameters": [
            "/appellations/MED AND NOT NEGOCIANT"
          ]
        },
        "chgtdenomigp": {
          "modele": "CotisationVariable",
          "prix": 0.7,
          "tva": 0.2,
          "unite": "hl",
          "libelle": "IGP",
          "complement_libelle": "",
          "docs": [
            "ChgtDenom"
          ],
          "callback": "getVolumeFacturable",
          "callback_parameters": [
            "/appellations/VAR,/appellations/MAU,/appellations/MCA AND NOT NEGOCIANT"
          ]
        }
      }
    },
    "conditionnement": {
      "modele": "CotisationsCollection",
      "callback": "",
      "libelle": "Forfait conditionneur IGP",
      "code_comptable": "70610400",
      "details": {
        "frais": {
          "modele": "CotisationFixe",
          "prix": 200,
          "tva": 0.2,
          "libelle": "",
          "complement_libelle": "",
          "docs": [
            "Conditionnement"
          ],
          "callback": "aFacturer",
          "callback_parameters": []
        }
      }
    },
    "20_%detail_identifiant%_10_redegustationIgp": {
      "minimum": 70,
      "modele": "CotisationsCollection",
      "callback": "",
      "libelle": "2nd dégustation",
      "code_comptable": "70610400",
      "details": {
        "redegustation": {
          "modele": "Cotisation",
          "prix": 0.7,
          "tva": 0.2,
          "unite": "hl",
          "libelle": "Contrôle IGP",
          "complement_libelle": "",
          "docs": [
            "Degustation"
          ],
          "callback": "buildMouvementsFacturesVolumeRedeguste",
          "callback_parameters": [
            "NOT /appellations/MED AND NOT /deja/CONFORME"
          ]
        }
      }
    },
    "20_%detail_identifiant%_10_redegustationMed": {
      "minimum": 90,
      "modele": "CotisationsCollection",
      "callback": "",
      "libelle": "2nd dégustation",
      "code_comptable": "70615000",
      "details": {
        "redegustation": {
          "modele": "Cotisation",
          "prix": 0.9,
          "tva": 0.2,
          "unite": "hl",
          "libelle": "Contrôle Méditerranée",
          "complement_libelle": "",
          "docs": [
            "Degustation"
          ],
          "callback": "buildMouvementsFacturesVolumeRedeguste",
          "callback_parameters": [
            "/appellations/MED AND NOT /deja/CONFORME"
          ]
        }
      }
    }
  }
}
