{
  "_id": "TEMPLATE-FACTURE-2020",
  "type": "TemplateFacture",
  "campagne": 2020,
  "template": "IGP",
  "libelle": "2020 - IGP",
  "docs": [
    "DR",
    "DRev"
  ],
  "cotisations": {
    "00_forfait": {
      "modele": "CotisationsCollection",
      "callback": "",
      "libelle": "Adhésion",
      "code_comptable": "706100",
      "details": {
        "forfait": {
          "modele": "CotisationFixe",
          "prix": 11,
          "tva": 0.2,
          "libelle": "annuelle",
          "complement_libelle": "",
          "docs": [
            "DRev"
          ],
          "callback": "isDeclarantFamille",
          "callback_parameters": [
            "NOT NEGOCIANT_VINIFICATEUR,COOPERATIVE"
          ]
        }
      }
    },
    "00_forfaitnegociantcave": {
      "modele": "CotisationsCollection",
      "callback": "",
      "libelle": "Adhésion",
      "code_comptable": "",
      "details": {
        "forfaitnegociantcave": {
          "modele": "CotisationFixe",
          "prix": 110,
          "tva": 0.2,
          "libelle": "annuelle (Coop. - négoce)",
          "complement_libelle": "",
          "docs": [
            "DRev"
          ],
          "callback": "isDeclarantFamille",
          "callback_parameters": [
            "NEGOCIANT_VINIFICATEUR,COOPERATIVE"
          ]
        }
      }
    },
    "05_DRCampagnePrecdente": {
      "modele": "CotisationsCollection",
      "callback": "",
      "libelle": "Adhésion ODG",
      "code_comptable": "706100",
      "details": {
        "forfait": {
          "modele": "CotisationVariable",
          "prix": 0.12,
          "tva": 0.2,
          "unite": "hl",
          "libelle": "DR L15 N-1 VSIG+IGP",
          "complement_libelle": "",
          "docs": [
            "DRev"
          ],
          "callback": "getVolumeL15FromDRPrecedente",
          "callback_parameters": []
        }
      }
    },
    "10_%detail_identifiant%_01_cotisationOdg": {
      "modele": "CotisationsCollection",
      "callback": "",
      "libelle": "ODG",
      "code_comptable": "",
      "details": {
        "forfaitLieuxPrelevements": {
          "modele": "CotisationFixe",
          "prix": 20,
          "tva": 0.2,
          "libelle": "Frais de passage - %detail_identifiant%",
          "complement_libelle": "",
          "docs": [
            "DRev"
          ],
          "callback": "getNbLieuxPrelevements"
        },
        "volumeRevendique": {
          "modele": "CotisationVariable",
          "prix": 0.1,
          "tva": 0.2,
          "unite": "hl",
          "libelle": "Cotisation - %detail_identifiant%",
          "complement_libelle": "",
          "docs": [
            "DRev"
          ],
          "callback": "getVolumeLotsFacturables"
        },
        "communication": {
          "modele": "CotisationVariable",
          "prix": 0.1,
          "tva": 0.2,
          "unite": "hl",
          "libelle": "Communication - %detail_identifiant%",
          "complement_libelle": "",
          "docs": [
            "DRev"
          ],
          "callback": "getVolumeRevendiqueLots"
        },
        "controleexterne": {
          "modele": "CotisationVariable",
          "prix": 0.05,
          "tva": 0.2,
          "unite": "hl",
          "libelle": "Contrôle externe - %detail_identifiant%",
          "complement_libelle": "",
          "docs": [
            "DRev"
          ],
          "callback": "getVolumeRevendiqueLots"
        },
        "controleinterne": {
          "modele": "CotisationVariable",
          "prix": 0.15,
          "tva": 0.2,
          "unite": "hl",
          "libelle": "Contrôle interne - %detail_identifiant%",
          "complement_libelle": "",
          "docs": [
            "DRev"
          ],
          "callback": "getVolumeRevendiqueLots"
        }
      }
    },
    "10_%detail_identifiant%_02_cotisationMed": {
      "modele": "CotisationsCollection",
      "callback": "",
      "libelle": "Redevance Méditerrannée",
      "code_comptable": "706100",
      "details": {
        "redevanceMed": {
          "modele": "CotisationVariable",
          "prix": 0.15,
          "tva": 0.2,
          "unite": "hl",
          "libelle": "- %detail_identifiant%",
          "complement_libelle": "",
          "docs": [
            "DRev"
          ],
          "callback": "getVolumeRevendiqueLots",
          "callback_parameters": [
            "/appellations/MED"
          ]
        }
      }
    },
    "10_%detail_identifiant%_11_INAO": {
      "modele": "CotisationsCollection",
      "callback": "",
      "libelle": "Cotisation INAO",
      "code_comptable": "",
      "details": {
        "inao": {
          "modele": "CotisationVariable",
          "prix": 0.03,
          "tva": 0,
          "unite": "hl",
          "libelle": "- %detail_identifiant%",
          "complement_libelle": "",
          "docs": [
            "DRev"
          ],
          "callback": "getVolumeRevendiqueLots"
        }
      }
    },
    "20_%detail_identifiant%_01_cotisationOdg": {
      "modele": "CotisationsCollection",
      "callback": "",
      "libelle": "Cotisation ODG 2nd passage",
      "code_comptable": "",
      "details": {
        "forfaitLieuxPrelevements": {
          "modele": "Cotisation",
          "prix": 20,
          "tva": 0.2,
          "libelle": "Forfait - %detail_identifiant%",
          "complement_libelle": "",
          "docs": [
            "Degustation"
          ],
          "callback": "buildMouvementsFacturesLotRedeguste",
          "callback_parameters": []
        },
        "volumeRevendique": {
          "modele": "Cotisation",
          "prix": 0.1,
          "tva": 0.2,
          "unite": "hl",
          "libelle": "- %detail_identifiant%",
          "complement_libelle": "",
          "docs": [
            "Degustation"
          ],
          "callback": "buildMouvementsFacturesVolumeRedeguste",
          "callback_parameters": []
        },
        "communication": {
          "modele": "Cotisation",
          "prix": 0.1,
          "tva": 0.2,
          "unite": "hl",
          "libelle": "Communication - %detail_identifiant%",
          "complement_libelle": "",
          "docs": [
            "Degustation"
          ],
          "callback": "buildMouvementsFacturesVolumeRedeguste",
          "callback_parameters": []
        },
        "controleexterne": {
          "modele": "Cotisation",
          "prix": 0.05,
          "tva": 0.2,
          "unite": "hl",
          "libelle": "Contrôle externe - %detail_identifiant%",
          "complement_libelle": "",
          "docs": [
            "Degustation"
          ],
          "callback": "buildMouvementsFacturesVolumeRedeguste",
          "callback_parameters": []
        },
        "controleinterne": {
          "modele": "Cotisation",
          "prix": 0.15,
          "tva": 0.2,
          "unite": "hl",
          "libelle": "Contrôle interne - %detail_identifiant%",
          "complement_libelle": "",
          "docs": [
            "Degustation"
          ],
          "callback": "buildMouvementsFacturesVolumeRedeguste",
          "callback_parameters": []
        }
      }
    }
  }
}